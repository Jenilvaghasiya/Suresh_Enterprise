<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        {{{css}}}
    </style>
    <title>Tax Invoice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    
</head>
<body>
    <div class="invoice-document">
        <div class="header-strip">
            <div class="company-title">
                <h1>{{company.companyName}}</h1>
                {{#if company.tagline}}<p class="tagline">{{company.tagline}}</p>{{/if}}
            </div>
            <div>
                <div class="invoice-type">TAX INVOICE</div>
                <span class="copy-badge">{{copyType}}</span>
            </div>
        </div>

        <div class="sub-header">
            Regd. Office: {{company.companyAddress}}
            {{#if company.companyPhone}} | Ph: {{company.companyPhone}}{{/if}}
            {{#if company.companyEmail}} | Email: {{company.companyEmail}}{{/if}}
            {{#if company.companyGstNumber}} | GSTIN: {{company.companyGstNumber}}{{/if}}
        </div>

        <div class="content-wrapper">
            <div class="invoice-meta">
                <div><strong>Invoice No:</strong> {{billNo}}</div>
                <div><strong>Invoice Date:</strong> {{billDate}}</div>
                {{#if dueDate}}<div><strong>Due Date:</strong> {{dueDate}}</div>{{/if}}
                <div><strong>State:</strong> {{customer.stateName}} ({{customer.stateCode}})</div>
            </div>

            <div class="parties-row">
                <div class="party-card">
                    <h3>Billing Address</h3>
                    <p><strong>M/s. {{customer.customerName}}</strong></p>
                    <p>{{customer.billingAddress}}</p>
                    {{#if customer.gstNumber}}<p>GSTIN: {{customer.gstNumber}}</p>{{/if}}
                    {{#if customer.stateCode}}<p>State Code: {{customer.stateCode}}</p>{{/if}}
                    {{#if customer.phone}}<p>Contact: {{customer.phone}}</p>{{/if}}
                </div>
                <div class="party-card">
                    <h3>Shipping Address</h3>
                    <p><strong>{{#if invoice.shippingName}}{{invoice.shippingName}}{{else}}{{customer.customerName}}{{/if}}</strong></p>
                    <p>{{#if invoice.deliveryAt}}{{invoice.deliveryAt}}{{else}}{{customer.billingAddress}}{{/if}}</p>
                    {{#if invoice.transport}}<p>Transport Mode: {{invoice.transport}}</p>{{/if}}
                    {{#if invoice.vehicleNumber}}<p>Vehicle: {{invoice.vehicleNumber}}</p>{{/if}}
                </div>
            </div>

            <div class="items-heading">ITEM DETAILS</div>
            <table class="items-table">
                <thead>
                    <tr>
                        <th style="width: 5%;">No.</th>
                        <th style="width: 33%;">Description</th>
                        <th style="width: 10%;">HSN</th>
                        <th style="width: 8%;">Qty</th>
                        <th style="width: 7%;">Unit</th>
                        <th style="width: 10%;">Rate</th>
                        <th style="width: 8%;">GST%</th>
                        <th style="width: 9%;">GST Amt</th>
                        <th style="width: 10%;" class="txt-right">Total</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each items}}
                    <tr>
                        <td class="txt-center">{{this.srNo}}</td>
                        <td>{{this.productName}}</td>
                        <td class="txt-center">{{this.hsnCode}}</td>
                        <td class="txt-center">{{this.quantity}}</td>
                        <td class="txt-center">{{this.uom}}</td>
                        <td class="txt-right">₹ {{this.rate}}</td>
                        <td class="txt-center">{{this.gstRate}}%</td>
                        <td class="txt-right">₹ {{this.gstAmount}}</td>
                        <td class="txt-right">₹ {{#if this.total}}{{this.total}}{{else}}{{this.amount}}{{/if}}</td>
                    </tr>
                    {{/each}}
                    {{#each emptyRows}}
                    <tr>
                        <td class="txt-center">&nbsp;</td>
                        <td></td>
                        <td class="txt-center"></td>
                        <td class="txt-center"></td>
                        <td class="txt-center"></td>
                        <td class="txt-right"></td>
                        <td class="txt-center"></td>
                        <td class="txt-right"></td>
                        <td class="txt-right"></td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>

            <div class="summary-grid">
                <div class="bank-card">
                    <h4>Payment Information</h4>
                    <p><strong>Bank Name:</strong> {{company.bankName}}</p>
                    <p><strong>Branch:</strong> {{company.branchName}}</p>
                    <p><strong>Account Holder:</strong> {{company.companyName}}</p>
                    <p><strong>Account Number:</strong> {{company.companyAccountNumber}}</p>
                    <p><strong>IFSC Code:</strong> {{company.ifscCode}}</p>
                    {{#if company.upiId}}<p><strong>UPI ID:</strong> {{company.upiId}}</p>{{/if}}
                    <p style="margin-top: 4px; padding-top: 4px; border-top: 1px solid #ddd; font-size: 7px; color: #666;">Scan QR code for quick payment (UPI enabled)</p>
                </div>
                <div class="totals-card">
                    <div class="total-item subtotal">
                        <span>Taxable Amount:</span>
                        <span>₹ {{totals.totalAssesValue}}</span>
                    </div>
                    {{#if isGst}}
                        {{#if totals.hasIgst}}
                            <div class="total-item"><span>IGST @ {{totals.igstRate}}%:</span><span>₹ {{totals.igstAmount}}</span></div>
                        {{else}}
                            <div class="total-item"><span>CGST @ {{totals.cgstRate}}%:</span><span>₹ {{totals.cgstAmount}}</span></div>
                            <div class="total-item"><span>SGST @ {{totals.sgstRate}}%:</span><span>₹ {{totals.sgstAmount}}</span></div>
                        {{/if}}
                    {{/if}}
                    {{#if totals.freightCharges}}
                    <div class="total-item"><span>Transport Charges:</span><span>₹ {{totals.freightCharges}}</span></div>
                    {{/if}}
                    <div class="total-item"><span>Round Off:</span><span>₹ {{#if totals.roundOff}}{{totals.roundOff}}{{else}}0.00{{/if}}</span></div>
                    <div class="total-item final"><span>NET PAYABLE:</span><span>₹ {{totals.billValue}}</span></div>
                </div>
            </div>

            <div class="words-strip">
                <strong>Amount in Words:</strong> {{amountInWords}}
            </div>

            <div class="bottom-area">
                <div class="terms-block">
                    <h4>Terms & Conditions</h4>
                    <ul>
                        <li>payment within {{#if invoice.paymentTerms}}{{invoice.paymentTerms}}{{else}}14 days{{/if}} of invoice date</li>
                        <li>goods once sold will not be taken back or exchanged</li>
                        <li>18% p.a. interest on overdue amounts; e & o e</li>
                        <li>all disputes subject to {{#if company.jurisdiction}}{{company.jurisdiction}}{{else}}{{customer.stateName}}{{/if}} jurisdiction</li>
                    </ul>
                </div>
                <div class="sign-block">
                    <p class="company">FOR {{company.companyName}}</p>
                    <div class="sign-space"></div>
                    <p class="signatory">Authorized Signatory</p>
                    <p class="stamp-text">(Company Seal & Signature)</p>
                </div>
            </div>
        </div>

        <div class="footer-black">
            <p>This is a computer generated invoice and does not require physical signature</p>
            <p>For queries: {{#if company.companyEmail}}{{company.companyEmail}}{{/if}} {{#if company.companyPhone}}| {{company.companyPhone}}{{/if}}</p>
        </div>
    </div>
</body>
</html>
